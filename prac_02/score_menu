"""
CP1404/CP5632 - Practical 2 - Nicholas Bracher

Menu driven program that uses a module import and functions to take a user input and determine their grade.
"""

from score import calulate_grade

MENU = "\n(G)et valid score\n(P)rint grade result\n(S)how stars\n(Q)uit\n"


def main():
    """Control main body through menu driven user interaction and fucntion calls."""

    user_score = -1 # Arbitrary inital number that is outside valid range to ensure program can't calculate grade without user input first. 
    choice = get_menu_selction("Welcome to the score menu! \nPlease choose from the below options: \n")

    while choice != "Q":

        if choice == "G":
            user_score = get_valid_score("\nEnter score: ", 0, 100)
            print(f"Score {user_score:.1f} recorded.")
            choice = get_menu_selction()

        elif choice == "P":
            if user_score != -1:
                grade = calculate_grade(user_score)
                print(f"\n-> Score: {user_score} \n-> Grade: {grade}\n")
                choice = get_menu_selction()

            else:
                choice = get_menu_selction("Please input your score first. \n")
                
        elif choice == "S":
            print("*" * user_score)
            choice = get_menu_selction()

    print("Thank you for using the score menu. Goodbye!")


def get_valid_score(prompt, low, high):
    """Get a valid score from the user."""
    score = float(input(prompt))

    while score < low or score > high:
        print("Invalid score. Please enter a score between 0 and 100.")
        score = float(input(prompt))
    return score


def get_menu_selection(prompt)
    """Get a valid menu selection input from the user."""
    print(prompt, MENU)
    choice = choice = input(">>> ").upper()

    while choice != "Q" or choice != "G" or choice != "P" or choice != "S"
        print(f"\nInvalid choice. Please choose between: \n{MENU}")
        choice = input(">>> ").upper()
    return choice


# def calculate_grade(score):
#     """Calculate grade from given score."""
#     if score < 50:
#         return "Bad"
#     elif score < 90:
#         return "Pass"
#     else:
#         return "Excellent"


main()
